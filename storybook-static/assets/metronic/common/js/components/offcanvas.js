"use strict";var KTOffcanvas=function(elementId,options){var the=this,element=KTUtil.getById(elementId),body=KTUtil.getBody();if(element){var defaultOptions={attrCustom:""},Plugin={construct:function(options){return KTUtil.data(element).has("offcanvas")?the=KTUtil.data(element).get("offcanvas"):(Plugin.init(options),Plugin.build(),KTUtil.data(element).set("offcanvas",the)),the},init:function(options){the.events=[],the.options=KTUtil.deepExtend({},defaultOptions,options),the.classBase=the.options.baseClass,the.attrCustom=the.options.attrCustom,the.classShown=the.classBase+"-on",the.classOverlay=the.classBase+"-overlay",the.target,the.state=KTUtil.hasClass(element,the.classShown)?"shown":"hidden"},build:function(){if(the.options.toggleBy)if("string"==typeof the.options.toggleBy)KTUtil.addEvent(KTUtil.getById(the.options.toggleBy),"click",(function(e){e.preventDefault(),the.target=this,Plugin.toggle()}));else if(the.options.toggleBy&&the.options.toggleBy[0])if(the.options.toggleBy[0].target)for(var i in the.options.toggleBy)KTUtil.addEvent(KTUtil.getById(the.options.toggleBy[i].target),"click",(function(e){e.preventDefault(),the.target=this,Plugin.toggle()}));else for(var i in the.options.toggleBy)KTUtil.addEvent(KTUtil.getById(the.options.toggleBy[i]),"click",(function(e){e.preventDefault(),the.target=this,Plugin.toggle()}));else the.options.toggleBy&&the.options.toggleBy.target&&KTUtil.addEvent(KTUtil.getById(the.options.toggleBy.target),"click",(function(e){e.preventDefault(),the.target=this,Plugin.toggle()}));var closeBy=KTUtil.getById(the.options.closeBy);closeBy&&KTUtil.addEvent(closeBy,"click",(function(e){e.preventDefault(),the.target=this,Plugin.hide()}))},isShown:function(){return"shown"==the.state},toggle:function(){Plugin.eventTrigger("toggle"),"shown"==the.state?Plugin.hide():Plugin.show()},show:function(){"shown"!=the.state&&(Plugin.eventTrigger("beforeShow"),Plugin.toggleClass("show"),KTUtil.attr(body,"data-offcanvas-"+the.classBase,"on"),KTUtil.addClass(element,the.classShown),the.attrCustom.length>0&&KTUtil.attr(body,"data-offcanvas-"+the.classCustom,"on"),the.state="shown",the.options.overlay&&(the.overlay=KTUtil.insertAfter(document.createElement("DIV"),element),KTUtil.addClass(the.overlay,the.classOverlay),KTUtil.addEvent(the.overlay,"click",(function(e){e.preventDefault(),Plugin.hide(the.target)}))),Plugin.eventTrigger("afterShow"))},hide:function(){"hidden"!=the.state&&(Plugin.eventTrigger("beforeHide"),Plugin.toggleClass("hide"),KTUtil.removeAttr(body,"data-offcanvas-"+the.classBase),KTUtil.removeClass(element,the.classShown),the.attrCustom.length>0&&KTUtil.removeAttr(body,"data-offcanvas-"+the.attrCustom),the.state="hidden",the.options.overlay&&the.overlay&&KTUtil.remove(the.overlay),Plugin.eventTrigger("afterHide"))},toggleClass:function(mode){var toggleBy,id=KTUtil.attr(the.target,"id");if(the.options.toggleBy&&the.options.toggleBy[0]&&the.options.toggleBy[0].target)for(var i in the.options.toggleBy)the.options.toggleBy[i].target===id&&(toggleBy=the.options.toggleBy[i]);else the.options.toggleBy&&the.options.toggleBy.target&&(toggleBy=the.options.toggleBy);if(toggleBy){var el=KTUtil.getById(toggleBy.target);"show"===mode&&KTUtil.addClass(el,toggleBy.state),"hide"===mode&&KTUtil.removeClass(el,toggleBy.state)}},eventTrigger:function(name,args){for(var i=0;i<the.events.length;i++){var event=the.events[i];if(event.name==name){if(1!=event.one)return event.handler.call(this,the,args);if(0==event.fired)return the.events[i].fired=!0,event.handler.call(this,the,args)}}},addEvent:function(name,handler,one){the.events.push({name:name,handler:handler,one:one,fired:!1})}};return the.setDefaults=function(options){defaultOptions=options},the.isShown=function(){return Plugin.isShown()},the.hide=function(){return Plugin.hide()},the.show=function(){return Plugin.show()},the.on=function(name,handler){return Plugin.addEvent(name,handler)},the.one=function(name,handler){return Plugin.addEvent(name,handler,!0)},Plugin.construct.apply(the,[options]),!0,the}};"undefined"!=typeof module&&void 0!==module.exports&&(module.exports=KTOffcanvas);