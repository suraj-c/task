var abp=abp||{};!function(){function configureConnection(connection){abp.signalr.hubs.common=connection;let tries=1,reconnectTime=abp.signalr.reconnectTime;function tryReconnect(){tries<=abp.signalr.maxTries&&connection.start().then((function(){reconnectTime=abp.signalr.reconnectTime,tries=1,console.log("Reconnected to SignalR server!"),abp.event.trigger("abp.signalr.reconnected")})).catch((function(){tries+=1,reconnectTime=abp.signalr.increaseReconnectTime(reconnectTime),setTimeout((function(){tryReconnect()}),reconnectTime)}))}connection.onclose((function(e){e?abp.log.debug("Connection closed with error: "+e):abp.log.debug("Disconnected"),abp.signalr.autoReconnect&&(abp.event.trigger("abp.signalr.disconnected"),tryReconnect())})),connection.on("getNotification",(function(notification){abp.event.trigger("abp.notifications.received",notification)}))}function startConnection(url,configureConnection){return abp.signalr.remoteServiceBaseUrl&&(url=abp.signalr.remoteServiceBaseUrl+url),abp.signalr.qs&&(url+=(-1==url.indexOf("?")?"?":"&")+abp.signalr.qs),function start(transport){abp.log.debug("Starting connection using "+signalR.HttpTransportType[transport]+" transport");var connection=(new signalR.HubConnectionBuilder).withUrl(url,transport).build();return configureConnection&&"function"==typeof configureConnection&&configureConnection(connection),connection.start().then((function(){return connection})).catch((function(error){return abp.log.debug("Cannot start the connection using "+signalR.HttpTransportType[transport]+" transport. "+error.message),transport!==signalR.HttpTransportType.LongPolling?start(transport+1):Promise.reject(error)}))}(signalR.HttpTransportType.WebSockets)}signalR&&(abp.signalr=abp.signalr||{},abp.signalr.hubs=abp.signalr.hubs||{},abp.signalr.reconnectTime=abp.signalr.reconnectTime||5e3,abp.signalr.maxTries=abp.signalr.maxTries||8,abp.signalr.increaseReconnectTime=abp.signalr.increaseReconnectTime||function(time){return 2*time},abp.signalr.autoConnect=void 0===abp.signalr.autoConnect||abp.signalr.autoConnect,abp.signalr.autoReconnect=void 0===abp.signalr.autoReconnect||abp.signalr.autoReconnect,abp.signalr.connect=abp.signalr.connect||function connect(){startConnection(abp.signalr.url||abp.appPath+"signalr",configureConnection).then((function(connection){abp.log.debug("Connected to SignalR server!"),abp.event.trigger("abp.signalr.connected"),connection.invoke("register").then((function(){abp.log.debug("Registered to the SignalR server!")}))})).catch((function(error){abp.log.debug(error.message)}))},abp.signalr.startConnection=abp.signalr.startConnection||startConnection,abp.signalr.autoConnect&&!abp.signalr.hubs.common&&abp.signalr.connect())}();